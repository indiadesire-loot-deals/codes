services:
  - type: web
    name: audio-stream-server
    env: node
    region: oregon
    plan: free
    buildCommand: |
      curl -L https://alphacephei.com/vosk/models/vosk-model-small-en-us-0.15.zip -o vosk-model.zip
      unzip -q vosk-model.zip
      mv vosk-model-small-en-us-0.15 vosk-model
      rm vosk-model.zip
      npm install
    startCommand: node server.js
    healthCheckPath: /health
    envVars:
      - key: NODE_ENV
        value: production
    disk:
      name: audio-storage
      mountPath: /opt/render/project/src/server-recordings
      sizeGB: 1
